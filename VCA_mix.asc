Version 4
SHEET 1 1204 740
WIRE -608 -896 -624 -896
WIRE -496 -896 -528 -896
WIRE -2128 -864 -2128 -896
WIRE -1984 -864 -2128 -864
WIRE -1808 -864 -1904 -864
WIRE -1712 -864 -1808 -864
WIRE -1600 -864 -1632 -864
WIRE -2128 -848 -2128 -864
WIRE -1440 -832 -1456 -832
WIRE -1328 -832 -1360 -832
WIRE -736 -800 -816 -800
WIRE -624 -800 -624 -896
WIRE -624 -800 -656 -800
WIRE -608 -800 -624 -800
WIRE -496 -784 -496 -896
WIRE -496 -784 -544 -784
WIRE -480 -784 -496 -784
WIRE -608 -768 -624 -768
WIRE -1920 -752 -2016 -752
WIRE -1808 -752 -1808 -864
WIRE -1808 -752 -1840 -752
WIRE -1712 -752 -1808 -752
WIRE -2016 -736 -2016 -752
WIRE -1600 -736 -1600 -864
WIRE -1600 -736 -1648 -736
WIRE -1568 -736 -1600 -736
WIRE -1456 -736 -1456 -832
WIRE -1456 -736 -1488 -736
WIRE -1440 -736 -1456 -736
WIRE -1712 -720 -1744 -720
WIRE -1328 -720 -1328 -832
WIRE -1328 -720 -1376 -720
WIRE -1296 -720 -1328 -720
WIRE -384 -720 -384 -736
WIRE -1440 -704 -1456 -704
WIRE -1744 -688 -1744 -720
WIRE -624 -688 -624 -768
WIRE -624 -688 -640 -688
WIRE -608 -688 -624 -688
WIRE -512 -688 -528 -688
WIRE -512 -672 -512 -688
WIRE -480 -672 -480 -784
WIRE -448 -672 -480 -672
WIRE -112 -656 -240 -656
WIRE -2016 -640 -2016 -656
WIRE -1456 -640 -1456 -704
WIRE -240 -608 -240 -656
WIRE -112 -576 -112 -656
WIRE -384 -560 -384 -624
WIRE -304 -560 -384 -560
WIRE -384 -528 -384 -560
WIRE -624 -432 -736 -432
WIRE -384 -432 -384 -448
WIRE -240 -432 -240 -512
WIRE -736 -384 -736 -432
WIRE -736 -288 -736 -304
WIRE -672 -288 -736 -288
WIRE -624 -288 -624 -432
WIRE -432 -288 -624 -288
WIRE -736 -272 -736 -288
WIRE -672 -272 -672 -288
WIRE -240 -256 -240 -352
WIRE -528 -224 -528 -368
WIRE -432 -224 -528 -224
WIRE -192 -224 -208 -224
WIRE 160 -224 16 -224
WIRE -864 -160 -944 -160
WIRE -736 -160 -736 -192
WIRE -736 -160 -784 -160
WIRE -432 -160 -736 -160
WIRE -1792 -144 -1808 -144
WIRE -1680 -144 -1728 -144
WIRE -1520 -144 -1584 -144
WIRE -1424 -144 -1456 -144
WIRE 16 -128 16 -224
WIRE 48 -128 16 -128
WIRE -944 -112 -944 -160
WIRE 160 -112 160 -224
WIRE 160 -112 112 -112
WIRE 384 -112 160 -112
WIRE -192 -96 -192 -224
WIRE -80 -96 -192 -96
WIRE 48 -96 -80 -96
WIRE -1808 -80 -1808 -144
WIRE -1584 -80 -1584 -144
WIRE -80 -80 -80 -96
WIRE 384 -80 384 -112
WIRE 464 -80 384 -80
WIRE 576 -80 544 -80
WIRE 672 -80 576 -80
WIRE 784 -80 752 -80
WIRE 1072 -48 1056 -48
WIRE 1200 -48 1152 -48
WIRE -944 0 -944 -32
WIRE -1984 16 -1984 0
WIRE -1808 16 -1808 0
WIRE -1584 16 -1584 0
WIRE -720 16 -752 16
WIRE -576 16 -640 16
WIRE -560 16 -576 16
WIRE -448 16 -480 16
WIRE -80 16 -80 0
WIRE 464 32 320 32
WIRE 576 32 576 -80
WIRE 576 32 544 32
WIRE 672 32 576 32
WIRE 784 48 784 -80
WIRE 784 48 736 48
WIRE 944 48 784 48
WIRE 1056 48 1056 -48
WIRE 1056 48 1024 48
WIRE 1072 48 1056 48
WIRE 672 64 640 64
WIRE 1200 64 1200 -48
WIRE 1200 64 1136 64
WIRE 1072 80 1040 80
WIRE -224 96 -256 96
WIRE -96 96 -144 96
WIRE 640 96 640 64
WIRE -688 112 -752 112
WIRE -576 112 -576 16
WIRE -576 112 -608 112
WIRE -560 112 -576 112
WIRE 1040 112 1040 80
WIRE -448 128 -448 16
WIRE -448 128 -496 128
WIRE -384 128 -448 128
WIRE -256 128 -256 96
WIRE -560 144 -576 144
WIRE -96 144 -96 96
WIRE -576 176 -576 144
WIRE -384 176 -384 128
WIRE -320 176 -384 176
WIRE -256 256 -256 224
WIRE -640 272 -752 272
WIRE -752 320 -752 272
WIRE -752 416 -752 400
WIRE -688 416 -752 416
WIRE -640 416 -640 272
WIRE -448 416 -640 416
WIRE -752 432 -752 416
WIRE -688 432 -688 416
WIRE -256 448 -256 336
WIRE -544 480 -544 336
WIRE -448 480 -544 480
WIRE -208 480 -224 480
WIRE 144 480 0 480
WIRE -880 544 -928 544
WIRE -752 544 -752 512
WIRE -752 544 -800 544
WIRE -448 544 -752 544
WIRE 0 576 0 480
WIRE 32 576 0 576
WIRE -928 592 -928 544
WIRE 144 592 144 480
WIRE 144 592 96 592
WIRE 320 592 320 32
WIRE 320 592 144 592
WIRE -208 608 -208 480
WIRE -96 608 -208 608
WIRE 32 608 -96 608
WIRE -96 624 -96 608
WIRE -928 704 -928 672
WIRE -96 720 -96 704
FLAG -1808 16 0
FLAG -1584 16 0
FLAG -1680 -144 V+
FLAG -336 -288 V+
FLAG -336 -160 V-
FLAG -528 -448 V+
FLAG -944 0 0
FLAG -2016 -640 0
FLAG -672 -272 0
FLAG 80 -144 V+
FLAG 80 -80 V-
FLAG -1680 -768 V+
FLAG -1680 -704 V-
FLAG -80 16 0
FLAG -352 416 V+
FLAG -352 544 V-
FLAG -544 256 V+
FLAG -688 432 0
FLAG 64 560 V+
FLAG 64 624 V-
FLAG -96 720 0
FLAG -928 704 0
FLAG 704 16 V+
FLAG 704 80 V-
FLAG 640 96 0
FLAG 1104 32 V+
FLAG 1104 96 V-
FLAG 1040 112 0
FLAG -112 -576 0
FLAG -384 -736 V+
FLAG -384 -432 V-
FLAG -1424 -144 V-
FLAG -1984 16 0
FLAG -1984 -80 Vref
FLAG -1744 -688 0
FLAG -2128 -768 V-
FLAG -2128 -976 V+
FLAG -1408 -752 V+
FLAG -1408 -688 V-
FLAG -576 -816 V+
FLAG -576 -752 V-
FLAG -512 -672 0
FLAG -720 -688 Vref
FLAG -96 144 0
FLAG -1296 -720 Vc
FLAG -816 -800 Vc
FLAG -1456 -640 0
FLAG -528 96 V+
FLAG -528 160 V-
FLAG -752 112 Vc
FLAG -576 176 0
FLAG -752 16 Vref
SYMBOL LM13700 -368 -304 R0
SYMATTR InstName U1
SYMBOL voltage -1808 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL voltage -1584 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value -12
SYMBOL res -544 -464 R0
SYMATTR InstName R1
SYMATTR Value 30k
SYMBOL res -768 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 30k
SYMBOL res -720 -176 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 508
SYMBOL voltage -944 -128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(0 5 200)
SYMBOL res -224 -336 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 19.6k
SYMBOL res -752 -400 R0
SYMATTR InstName R7
SYMATTR Value 492
SYMBOL Opamps\\AD711 80 -176 R0
SYMATTR InstName U2
SYMBOL Opamps\\AD711 -1680 -800 R0
SYMATTR InstName U3
SYMBOL res -1824 -768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -1616 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 20k
SYMBOL res -96 -96 R0
SYMATTR InstName R6
SYMATTR Value 30k
SYMBOL LM13700 -384 400 R0
SYMATTR InstName U4
SYMBOL res -560 240 R0
SYMATTR InstName R9
SYMATTR Value 30k
SYMBOL res -784 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 30k
SYMBOL res -736 528 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value 508
SYMBOL res -272 240 R0
SYMATTR InstName R12
SYMATTR Value 0.1
SYMBOL res -768 304 R0
SYMATTR InstName R13
SYMATTR Value 492
SYMBOL Opamps\\AD711 64 528 R0
SYMATTR InstName U5
SYMBOL res -112 608 R0
SYMATTR InstName R14
SYMATTR Value 30k
SYMBOL voltage -928 576 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value SINE(0 5 340)
SYMBOL Opamps\\AD711 704 -16 R0
SYMATTR InstName U6
SYMBOL res 560 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res 768 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL res 560 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 10k
SYMBOL Opamps\\AD711 1104 0 R0
SYMATTR InstName U7
SYMBOL res 1040 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 20k
SYMBOL res 1168 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 10k
SYMBOL pnp -304 -512 M180
SYMATTR InstName Q1
SYMATTR Value 2N3906
SYMBOL npn -448 -720 R0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL res -400 -544 R0
SYMATTR InstName R20
SYMATTR Value 120k
SYMBOL schottky -1792 -128 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -1456 -160 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage -2016 -752 R0
WINDOW 123 0 0 Left 0
WINDOW 39 -220 88 Left 2
WINDOW 3 -302 63 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR Value PWL(0 -5 0.02 -5 0.08 5)
SYMATTR InstName V7
SYMBOL voltage -1984 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 3.3
SYMBOL res -1888 -880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 20k
SYMBOL res -2144 -992 R0
SYMATTR InstName R22
SYMATTR Value 5k
SYMBOL res -2144 -864 R0
SYMATTR InstName R23
SYMATTR Value 5k
SYMBOL Opamps\\AD711 -1408 -784 R0
SYMATTR InstName U9
SYMBOL res -1472 -752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 10k
SYMBOL res -1344 -848 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 10k
SYMBOL Opamps\\AD711 -576 -848 R0
SYMATTR InstName U8
SYMBOL res -640 -816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 200k
SYMBOL res -512 -912 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 3k
SYMBOL res -624 -704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 10k
SYMBOL res -512 -704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R29
SYMATTR Value 300
SYMBOL pnp -320 224 M180
SYMATTR InstName Q3
SYMATTR Value 2N3906
SYMBOL res -128 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 18k
SYMBOL Opamps\\AD711 -528 64 R0
SYMATTR InstName U10
SYMBOL res -592 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R31
SYMATTR Value 20k
SYMBOL res -464 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R32
SYMATTR Value 10k
SYMBOL res -624 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R33
SYMATTR Value 6.8k
TEXT -1224 88 Left 2 !.include LM13700.sub
TEXT -1216 56 Left 2 !.tran .1
TEXT -144 -416 Left 6 ;Exponential
TEXT -1312 368 Left 6 ;Linear
